<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
            name="keywords"
            content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Matrix lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Matrix admin lite design, Matrix admin lite dashboard bootstrap 5 dashboard template"
    />
    <meta
            name="description"
            content="Matrix Admin Lite Free Version is powerful and clean admin dashboard template, inpired from Bootstrap Framework"
    />
    <meta name="robots" content="noindex,nofollow" />
    <title>Matrix Admin Lite Free Versions Template by WrapPixel</title>
    <!-- Favicon icon -->
    <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/admin/assets/images/favicon.png"
    />
    <!-- Custom CSS -->
    <link href="/admin/assets/libs/flot/css/float-chart.css" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="/admin/dist/css/style.min.css" rel="stylesheet" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


<body>
<!-- ============================================================== -->
<!-- Preloader - style you can find in spinners.css -->
<!-- ============================================================== -->
<div class="preloader">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
</div>
<!-- ============================================================== -->
<!-- Main wrapper - style you can find in pages.scss -->
<!-- ============================================================== -->
<div
        id="main-wrapper"
        data-layout="vertical"
        data-navbarbg="skin5"
        data-sidebartype="full"
        data-sidebar-position="absolute"
        data-header-position="absolute"
        data-boxed-layout="full"
>
    <!-- ============================================================== -->
    <!-- Topbar header.html - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div th:replace="admin/component/header"></div>
    <!-- ============================================================== -->
    <!-- End Topbar header.html -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Left Sidebar - style you can find in sidebar.scss  -->
    <!-- ============================================================== -->
    <div th:replace="admin/component/sidebar"></div>
    <!-- ============================================================== -->
    <!-- End Left Sidebar - style you can find in sidebar.scss  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Page wrapper  -->
    <!-- ============================================================== -->
    <div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <h4 class="page-title">Dashboard</h4>
                    <div class="ms-auto text-end">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">
                                    home
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
            <!-- ============================================================== -->
            <div class="row" id="row1">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <div class="mb-3">
                                        <input type="text" class="form-control" id="num_cpt" placeholder="Enter num_cpt" name="num_cpt">
                                    </div>
                                </div>
                                <input th:value="${exp}" hidden="" type="text" id="exp">
                                <div class="col">
                                    <div class="mb-3">
                                        <button type="submit" class="btn btn-primary" id="validateNumCpt">Valider</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" id="row2">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <div class="mb-3">
                                            <input type="text" disabled class="form-control" id="numCpt" placeholder="Enter nomClient" >
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <input type="text" disabled class="form-control" id="nomClient" placeholder="Enter nomClient" >
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <input type="text" disabled class="form-control" id="prenomsClient" placeholder="Enter prenomsClient" >
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <input type="number" class="form-control" id="montant" placeholder="Enter montant" name="montant">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <button type="submit" id="depotBtn" class="btn btn-primary">Valider</button>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Container fluid  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- footer -->
        <!-- ============================================================== -->
        <div th:replace="admin/component/footer"></div>
        <!-- ============================================================== -->
        <!-- End footer -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Page wrapper  -->
    <!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Wrapper -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- All Jquery -->
<!-- ============================================================== -->
<script src="/admin/assets/libs/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="/admin/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="/admin/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
<script src="/admin/assets/extra-libs/sparkline/sparkline.js"></script>
<!--Wave Effects -->
<script src="/admin/dist/js/waves.js"></script>
<!--Menu sidebar -->
<script src="/admin/dist/js/sidebarmenu.js"></script>
<!--Custom JavaScript -->
<script src="/admin/dist/js/custom.min.js"></script>
<!--This page JavaScript -->
<!-- <script src="/admin/dist/js/pages/dashboards/dashboard1.js"></script> -->
<!-- Charts js Files -->
<script src="/admin/assets/libs/flot/excanvas.js"></script>
<script src="/admin/assets/libs/flot/jquery.flot.js"></script>
<script src="/admin/assets/libs/flot/jquery.flot.pie.js"></script>
<script src="/admin/assets/libs/flot/jquery.flot.time.js"></script>
<script src="/admin/assets/libs/flot/jquery.flot.stack.js"></script>
<script src="/admin/assets/libs/flot/jquery.flot.crosshair.js"></script>
<script src="/admin/assets/libs/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
<script src="/admin/dist/js/pages/chart/chart-page-init.js"></script>
<!-- this page js -->
<script src="/admin/assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
<script src="/admin/assets/extra-libs/multicheck/jquery.multicheck.js"></script>
<script src="/admin/assets/extra-libs/DataTables/datatables.min.js"></script>
<script>
    $(document).ready(function() {
           $('#row2').hide();

           $('#validateNumCpt').click(function(event) {
               event.preventDefault();
               var numCpt = $('#num_cpt').val();

               $.ajax({
                   url: '/api/compte/' + numCpt,
                   type: 'GET',
                   success: function(data) {
                       if (data.user != null) {
                           $('#numCpt').val(data.num_cpt);
                           $('#nomClient').val(data.user.nom);
                           $('#prenomsClient').val(data.user.prenoms);
                           $('#row2').show();
                       } else {
                           alert('Compte non trouvé');
                       }
                   },
                   error: function() {
                       alert('Erreur lors de la récupération des informations du compte');
                   }
               });
           });

           $('#validateMontant').click(function(event) {
               event.preventDefault();
               var numCpt = $('#num_cpt').val();
               var montant = $('#montant').val();

               // Effectuez ici la logique supplémentaire pour valider et envoyer le montant si nécessaire.
               alert('Montant validé : ' + montant);
           });

    $('#depotBtn').click(function () {
        var cptExp = $('#exp').val();
        var cptDes = $('#num_cpt').val();
        var montant = $('#montant').val();

        $.ajax({
            url: '/api/compte/depot',
            type: 'POST',
            contentType: 'application/x-www-form-urlencoded',
            data: {
                cpt_exp: cptExp,
                cpt_des: cptDes,
                montant: montant
            },
            success: function (response) {

                if (response) {
                    $('#resultMessage').text('Dépôt réussi');
                    alert("Dépôt réussi")
                } else {
                    $('#resultMessage').text('Échec du dépôt');
                }
                $('#row2').hide();
            },
            error: function (xhr, status, error) {
                $('#row2').show();
                $('#resultMessage').text('Erreur: ' + error);
            }
        });
});
    });

</script>
</body>
</html>
